function uwp_nl2br(a,t){return(a+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(t||void 0===t?"<br />":"<br>")+"$2")}function uwp_profile_image_change(a){jQuery(".uwp-profile-image-change-modal").remove();jQuery("body").append('<div class="modal fade uwp-profile-image-change-modal bsui" tabindex="-1" role="dialog" aria-labelledby="uwp-profile-modal-title" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="uwp-profile-modal-title"></h5></div><div class="modal-body text-center"><i class="fas fa-circle-notch fa-spin fa-3x"></i></div></div></div></div>'),jQuery(".uwp-profile-image-change-modal").modal({backdrop:"static"});var t={action:"uwp_ajax_image_crop_popup_form",type:a,style:"bootstrap"};jQuery.post(uwp_localize_data.ajaxurl,t,function(a){jQuery(".uwp-profile-image-change-modal .modal-content").html(a)})}function uwp_init_auth_modal(){uwp_localize_data.login_modal&&(jQuery(".users-wp-login-nav a, .uwp-login-link").unbind("click"),jQuery(".users-wp-login-nav a, .uwp-login-link").click(function(a){return uwp_cancelBubble(a),uwp_modal_login_form(),!1})),uwp_localize_data.register_modal&&(jQuery(".users-wp-register-nav a, .uwp-register-link").unbind("click"),jQuery(".users-wp-register-nav a, .uwp-register-link").click(function(a){return uwp_cancelBubble(a),uwp_modal_register_form(),!1})),uwp_localize_data.forgot_modal&&(jQuery(".users-wp-forgot-nav a, .uwp-forgot-password-link").unbind("click"),jQuery(".users-wp-forgot-nav a, .uwp-forgot-password-link").click(function(a){return uwp_cancelBubble(a),uwp_modal_forgot_password_form(),!1}))}function uwp_modal_loading(a){$input_single='<span class="badge badge-pill badge-light p-3 mt-3 w-100 bg-loading">&nbsp;</span>',$inputs=a?$input_single.repeat(a):$input_single;var t='<div class="modal-header"><span class="badge badge-pill badge-light p-0 mt-2 w-25 bg-loading">&nbsp;</span></div><div class="modal-body text-center">'+$inputs+"</div>",e='<div class="modal fade uwp-auth-modal bsui" tabindex="-1" role="dialog" aria-labelledby="uwp-profile-modal-title" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content">'+t+"</div></div></div>";jQuery(".uwp-auth-modal").length?jQuery(".uwp-auth-modal .modal-content").html(t):jQuery("body").append(e),jQuery(".uwp-auth-modal").modal()}function uwp_modal_login_form(){jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:{action:"uwp_ajax_login_form"},beforeSend:function(){uwp_modal_loading(4)},success:function(a){a.success&&(jQuery(".uwp-auth-modal .modal-content").html(a.data),setTimeout(function(){jQuery(".uwp-auth-modal .modal-content input:visible:enabled:first").focus().unbind("focus")},300),jQuery(".uwp-auth-modal .modal-content form.uwp-login-form").submit(function(a){a.preventDefault(a),uwp_modal_login_form_process()})),uwp_init_auth_modal()}})}function uwp_maybe_check_recaptcha(a){return"undefined"!=typeof uwp_recaptcha_loops&&uwp_recaptcha_loops||(uwp_recaptcha_loops=1),jQuery(".uwp-auth-modal .modal-content .g-recaptcha-response").length&&""==jQuery(".uwp-auth-modal .modal-content .g-recaptcha-response").val()?(setTimeout(function(){if(jQuery('.uwp-auth-modal .modal-content button[type="submit"] i.fa-spin,.uwp-auth-modal .modal-content button[type="submit"] svg.fa-spin').remove(),uwp_recaptcha_loops>=6)return jQuery(".uwp-auth-modal .modal-content .uwp_login_submit").prop("disabled",!1),jQuery(".uwp-auth-modal .modal-content .uwp_register_submit").prop("disabled",!1),jQuery(".uwp-auth-modal .modal-content .uwp_forgot_submit").prop("disabled",!1),jQuery(".uwp-auth-modal .modal-content .uwp-captcha-render").addClass("alert alert-danger"),""==jQuery(".uwp-auth-modal .modal-content .modal-error").html()&&jQuery(".uwp-auth-modal .modal-content .modal-error").html("<div class='alert alert-danger'>"+uwp_localize_data.error_retry+"</div>"),!1;"login"==a?uwp_modal_login_form_process():"register"==a?uwp_modal_register_form_process():"forgot"==a&&uwp_modal_forgot_password_form_process()},500),uwp_recaptcha_loops++,!1):(uwp_recaptcha_loops=0,!0)}function uwp_maybe_reset_recaptcha(){if(jQuery(".uwp-auth-modal .modal-content .g-recaptcha-response").length){jQuery(".uwp-auth-modal .modal-content .uwp-captcha-render").html("");var a=jQuery(".uwp-auth-modal .modal-content .uwp-captcha-render").attr("id");jQuery(".uwp-auth-modal .modal-content .uwp-captcha-render").replaceWith("<div id='"+a+"' class='uwp-captcha-render'></div>"),setTimeout(function(){uwp_init_recaptcha()},50)}}function uwp_modal_login_form_process(){var a=jQuery(".modal-content form.uwp-login-form").serialize()+"&action=uwp_ajax_login";$button_text=jQuery(".uwp-auth-modal .modal-content .uwp_login_submit").html(),jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:a,beforeSend:function(){return jQuery(".uwp-auth-modal .modal-content .uwp_login_submit").html('<i class="fas fa-circle-notch fa-spin"></i> '+$button_text).prop("disabled",!0),jQuery(".uwp-auth-modal .modal-content .modal-error").html(""),uwp_maybe_check_recaptcha("login")},success:function(a){1==a.success?(jQuery(".uwp-auth-modal .modal-content .uwp_login_submit").html($button_text).prop("disabled",!0),jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data),setTimeout(function(){location.reload()},1e3)):!1===a.success&&(jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data),jQuery(".uwp-auth-modal .modal-content .uwp_login_submit").html($button_text).prop("disabled",!1),uwp_maybe_reset_recaptcha()),uwp_init_auth_modal()}})}function uwp_modal_register_form(){jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:{action:"uwp_ajax_register_form"},beforeSend:function(){uwp_modal_loading(6)},success:function(a){a.success&&(jQuery(".uwp-auth-modal .modal-content").html(a.data),setTimeout(function(){jQuery(".uwp-auth-modal .modal-content input:visible:enabled:first").focus().unbind("focus")},300),jQuery(".uwp-auth-modal .modal-content form.uwp-registration-form").submit(function(a){a.preventDefault(a),uwp_modal_register_form_process()})),uwp_init_auth_modal()}})}function uwp_modal_register_form_process(){var a=jQuery(".modal-content form.uwp-registration-form").serialize()+"&action=uwp_ajax_register";$button=jQuery(".uwp-auth-modal .modal-content .uwp_register_submit"),$button_text=$button.html(),jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:a,beforeSend:function(){return $button.html('<i class="fas fa-circle-notch fa-spin"></i> '+$button_text).prop("disabled",!0),jQuery(".uwp-auth-modal .modal-content .modal-error").html(""),uwp_maybe_check_recaptcha("register")},success:function(a){a.success?($button.html($button_text).prop("disabled",!0),a.data.message?(jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data.message),setTimeout(function(){a.data.redirect?window.location=a.data.redirect:location.reload()},1e3)):jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data)):!1===a.success&&(jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data),$button.html($button_text).prop("disabled",!1),uwp_maybe_reset_recaptcha()),uwp_init_auth_modal()}})}function uwp_modal_forgot_password_form(){jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:{action:"uwp_ajax_forgot_password_form"},beforeSend:function(){uwp_modal_loading(2)},success:function(a){a.success&&(jQuery(".uwp-auth-modal .modal-content").html(a.data),setTimeout(function(){jQuery(".uwp-auth-modal .modal-content input:visible:enabled:first").focus().unbind("focus")},300),jQuery(".uwp-auth-modal .modal-content form.uwp-forgot-form").submit(function(a){a.preventDefault(a),uwp_modal_forgot_password_form_process()})),uwp_init_auth_modal()}})}function uwp_modal_forgot_password_form_process(){var a=jQuery(".modal-content form.uwp-forgot-form").serialize()+"&action=uwp_ajax_forgot_password";$button=jQuery(".uwp-auth-modal .modal-content .uwp_forgot_submit"),$button_text=$button.html(),jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:a,beforeSend:function(){return $button.html('<i class="fas fa-circle-notch fa-spin"></i> '+$button_text).prop("disabled",!0),jQuery(".uwp-auth-modal .modal-content .modal-error").html(""),uwp_maybe_check_recaptcha("forgot")},success:function(a){a.success?($button.html($button_text).prop("disabled",!0),jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data)):!1===a.success&&(jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data),$button.html($button_text).prop("disabled",!1),uwp_maybe_reset_recaptcha()),uwp_init_auth_modal()}})}function uwp_checkPasswordStrength(a,t,e,o,u){var r=a.val(),l=t.val();!jQuery("#uwp-password-strength").length&&r?(t.length?$container=t.closest(".form-group"):$container=a.closest(".form-group"),$container.append('<div class="progress mt-1"><div id="uwp-password-strength" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0;"></div></div>'),e=jQuery("#uwp-password-strength")):r||l||e.parent().remove(),e.removeClass("short bad good strong bg-warning bg-success bg-danger"),u=u.concat(wp.passwordStrength.userInputBlacklist());var n=wp.passwordStrength.meter(r,u,l);switch(n){case 2:e.addClass("bad bg-warning").html(pwsL10n.bad).width("50%");break;case 3:e.addClass("good bg-success").html(pwsL10n.good).width("75%");break;case 4:e.addClass("strong bg-success").html(pwsL10n.strong).width("100%");break;case 5:e.addClass("short bg-danger").html(pwsL10n.mismatch).width("25%");break;default:e.addClass("short bg-danger").html(pwsL10n.short).width("25%")}return n}function uwp_cancelBubble(a){var t=a||window.event;t.stopPropagation&&t.stopPropagation(),null!=t.cancelBubble&&(t.cancelBubble=!0)}function uwp_gd_delete_post(a){var t=geodir_params.my_place_listing_del;return!!confirm(t)&&(jQuery.ajax({url:geodir_params.ajax_url,type:"POST",dataType:"json",data:{action:"geodir_user_delete_post",security:geodir_params.basic_nonce,post_id:a},timeout:2e4,success:function(a){a.success?(lity('<div class="gd-notification gd-success"><i class="fas fa-check-circle"></i> '+a.data.message+"</div>"),setTimeout(function(){location.reload()},3e3)):lity('<div class="gd-notification gd-error"><i class="fas fa-exclamation-circle"></i> '+a.data.message+"</div>")}}),!0)}jQuery(window).load(function(){uwp_init_auth_modal()}),function(a,t,e){a(document).ready(function(){var t=uwp_localize_data.uwp_more_char_limit,e=uwp_localize_data.uwp_more_ellipses_text,o=uwp_localize_data.uwp_more_text,u=uwp_localize_data.uwp_less_text;a(".uwp_more").each(function(){var u=a.trim(a(this).text());if(u.length>t){var r=u.substr(0,t),l=u.substr(t,u.length-t),n=uwp_nl2br(r)+'<span class="uwp_more_ellipses">'+e+'&nbsp;</span><span class="uwp_more_content"><span style="display: none;">'+uwp_nl2br(l)+'</span>&nbsp;&nbsp;<a href="" class="uwp_more_link">'+o+"</a></span>";a(this).html(n)}}),a(".uwp_more_link").click(function(){return a(this).hasClass("uwp_less")?(a(this).removeClass("uwp_less"),a(this).html(o)):(a(this).addClass("uwp_less"),a(this).html(u)),a(this).parent().prev().toggle(),a(this).prev().toggle(),!1})})}(jQuery,window),function(a,t,e){var o;a(document).ready(function(){a(".uwp-profile-modal-form-trigger").on("click",function(t){t.preventDefault();var e={action:"uwp_ajax_image_crop_popup_form",type:o=a(this).data("type")},u=jQuery("#uwp-popup-modal-wrap");u.show(),jQuery.post(uwp_localize_data.ajaxurl,e,function(t){a(document.body).append("<div id='uwp-modal-backdrop'></div>"),u.replaceWith(t)})})}),a(document).ready(function(){a(".uwp_upload_file_remove").click(function(t){t.preventDefault();var e=a(this).data("htmlvar"),o=a(this).data("uid"),u={action:"uwp_upload_file_remove",htmlvar:e,uid:o};jQuery.post(uwp_localize_data.ajaxurl,u,function(t){a("#"+e+"_row").find(".uwp_file_preview_wrap").remove(),a("#"+e).closest("td").find(".uwp_file_preview_wrap").remove(),a("input[name="+e+"]").data("is-required")&&a("input[name="+e+"]").prop("required",!0)})})})}(jQuery,window),function(a,t,e){a(document).ready(function(){function t(t){a("#uwp_login_modal .uwp-login-ajax-notice").remove();var e=jQuery(t).serialize()+"&action=uwp_ajax_login";jQuery.post(uwp_localize_data.ajaxurl,e,function(t){(t=jQuery.parseJSON(t)).error?a("#uwp_login_modal form.uwp-login-form").before(t.message):(a("#uwp_login_modal form.uwp-login-form").before(t.message),setTimeout(function(){location.reload()},1200))})}a("#uwp_layout").change(function(){var t=a(this).val(),e=a("#uwp_user_items_layout");e.removeClass(),"list"==t?e.addClass("uwp-users-list-wrap uwp_listview"):"2col"==t?e.addClass("uwp-users-list-wrap uwp_gridview uwp_gridview_2col"):"3col"==t?e.addClass("uwp-users-list-wrap uwp_gridview uwp_gridview_3col"):"4col"==t?e.addClass("uwp-users-list-wrap uwp_gridview uwp_gridview_4col"):"5col"==t?e.addClass("uwp-users-list-wrap uwp_gridview uwp_gridview_5col"):e.addClass("uwp-users-list-wrap uwp_listview")}),jQuery(document).ready(function(a){a("#uwp_login_modal form.uwp-login-form").submit(function(a){a.preventDefault(),t(this)})})})}(jQuery,window);
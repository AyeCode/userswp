function uwp_nl2br(a,e){return(a+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(e||void 0===e?"<br />":"<br>")+"$2")}function uwp_list_view_select(a,e){var t="uwp_list_view",o=jQuery(".uwp-users-loop > .row");o.length||(o=jQuery(".uwp-profile-cpt-loop > .row"),t="uwp_cpt_list_view");var r=jQuery(".uwp-list-view-select");0==a?(o.removeClass("row-cols-sm-2 row-cols-md-2 row-cols-md-3 row-cols-md-4 row-cols-md-5").addClass("row-cols-md-0"),r.find("button").removeClass("active"),r.find("button.uwp-list-view-select-list").addClass("active")):(r.find("button").removeClass("active"),r.find("button.uwp-list-view-select-grid").addClass("active"),r.find('button[data-gridview="'+a+'"]').addClass("active"),o.removeClass("row-cols-md-0 row-cols-md-2 row-cols-md-3 row-cols-md-4 row-cols-md-5").addClass("row-cols-sm-2 row-cols-md-"+a)),e||localStorage.setItem(t,a)}function uwp_profile_image_change(a){jQuery(".uwp-profile-image-change-modal").remove();(jQuery("body").append('<div class="modal fade uwp-profile-image-change-modal bsui" tabindex="-1" role="dialog" aria-labelledby="uwp-profile-modal-title" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="uwp-profile-modal-title"></h5></div><div class="modal-body text-center"><i class="fas fa-circle-notch fa-spin fa-3x"></i></div></div></div></div>'),window.bootstrap&&window.bootstrap.Modal)?new window.bootstrap.Modal(document.querySelector(".uwp-profile-image-change-modal")).show():jQuery(".uwp-profile-image-change-modal").modal({backdrop:"static"});var e={action:"uwp_ajax_image_crop_popup_form",type:a,style:"bootstrap"};jQuery.post(uwp_localize_data.ajaxurl,e,(function(a){jQuery(".uwp-profile-image-change-modal .modal-content").html(a)}))}function uwp_init_auth_modal(){uwp_localize_data.login_modal&&(jQuery('.users-wp-login-nav a, .uwp-login-link, [data-uwp-link="login"]').off("click"),jQuery('.users-wp-login-nav a, .uwp-login-link, [data-uwp-link="login"]').on("click",(function(a){return uwp_cancelBubble(a),uwp_modal_login_form(),!1}))),uwp_localize_data.register_modal&&(jQuery('.users-wp-register-nav a, .uwp-register-link, [data-uwp-link="register"]').off("click"),jQuery('.users-wp-register-nav a, .uwp-register-link, [data-uwp-link="register"]').on("click",(function(a){return uwp_cancelBubble(a),uwp_modal_register_form(),!1}))),uwp_localize_data.forgot_modal&&(jQuery('.users-wp-forgot-nav a, .uwp-forgot-password-link, [data-uwp-link="forgot-password"]').off("click"),jQuery('.users-wp-forgot-nav a, .uwp-forgot-password-link, [data-uwp-link="forgot-password"]').on("click",(function(a){return uwp_cancelBubble(a),uwp_modal_forgot_password_form(),!1})))}function uwp_modal_loading(a){$input_single='<span class="badge badge-pill badge-light p-3 mt-3 w-100 bg-loading">&nbsp;</span>',$inputs=a?$input_single.repeat(a):$input_single;var e='<div class="modal-header"><span class="badge badge-pill badge-light p-0 mt-2 w-25 bg-loading">&nbsp;</span></div><div class="modal-body text-center">'+$inputs+"</div>",t='<div class="modal fade uwp-auth-modal bsui" tabindex="-1" role="dialog" aria-labelledby="uwp-profile-modal-title" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content">'+e+"</div></div></div>";(jQuery(".uwp-auth-modal").length?jQuery(".uwp-auth-modal .modal-content").html(e):jQuery("body").append(t),jQuery(".modal-backdrop").remove(),window.bootstrap&&window.bootstrap.Modal)?new window.bootstrap.Modal(document.querySelector(".uwp-auth-modal")).show():jQuery(".uwp-auth-modal").modal()}function uwp_modal_login_form(){jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:{action:"uwp_ajax_login_form"},beforeSend:function(){uwp_modal_loading(4)},success:function(a){a.success&&(jQuery(".uwp-auth-modal .modal-content").html(a.data),setTimeout((function(){jQuery(".uwp-auth-modal .modal-content input:visible:enabled:first").focus().unbind("focus")}),300),jQuery(".uwp-auth-modal .modal-content form.uwp-login-form").on("submit",(function(a){a.preventDefault(a),uwp_modal_login_form_process()}))),uwp_init_auth_modal()}})}function uwp_maybe_check_recaptcha(a){return"undefined"!=typeof uwp_recaptcha_loops&&uwp_recaptcha_loops||(uwp_recaptcha_loops=1),jQuery(".uwp-auth-modal .modal-content .g-recaptcha-response").length&&""==jQuery(".uwp-auth-modal .modal-content .g-recaptcha-response").val()?(setTimeout((function(){if(jQuery('.uwp-auth-modal .modal-content button[type="submit"] i.fa-spin,.uwp-auth-modal .modal-content button[type="submit"] svg.fa-spin').remove(),uwp_recaptcha_loops>=6)return jQuery(".uwp-auth-modal .modal-content .uwp_login_submit").prop("disabled",!1),jQuery(".uwp-auth-modal .modal-content .uwp_register_submit").prop("disabled",!1),jQuery(".uwp-auth-modal .modal-content .uwp_forgot_submit").prop("disabled",!1),jQuery(".uwp-auth-modal .modal-content .uwp-captcha-render").addClass("alert alert-danger"),""==jQuery(".uwp-auth-modal .modal-content .modal-error").html()&&jQuery(".uwp-auth-modal .modal-content .modal-error").html("<div class='alert alert-danger'>"+uwp_localize_data.error_retry+"</div>"),!1;"login"==a?uwp_modal_login_form_process():"register"==a?uwp_modal_register_form_process():"forgot"==a&&uwp_modal_forgot_password_form_process()}),500),uwp_recaptcha_loops++,!1):(uwp_recaptcha_loops=0,!0)}function uwp_maybe_reset_recaptcha(){if(jQuery(".uwp-auth-modal .modal-content .g-recaptcha-response").length){var a=jQuery(".uwp-auth-modal .modal-content .g-recaptcha-response").attr("id");uwp_reset_captcha(a)}document.dispatchEvent(new Event("ayecode_reset_captcha"))}function uwp_modal_login_form_process(){var a=jQuery(".modal-content form.uwp-login-form").serialize()+"&action=uwp_ajax_login";$button_text=jQuery(".uwp-auth-modal .modal-content .uwp_login_submit").html(),jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:a,beforeSend:function(){return jQuery(".uwp-auth-modal .modal-content .uwp_login_submit").html('<i class="fas fa-circle-notch fa-spin"></i> '+$button_text).prop("disabled",!0),jQuery(".uwp-auth-modal .modal-content .modal-error").html(""),uwp_maybe_check_recaptcha("login")},success:function(a){1==a.success?(jQuery(".uwp-auth-modal .modal-content .uwp_login_submit").html($button_text).prop("disabled",!0),jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data.message),a.data.is_2fa?(jQuery(".modal-content form.uwp-login-form").replaceWith(a.data.html),jQuery(".uwp-auth-modal .modal-content form.validate_2fa_form").on("submit",(function(a){a.preventDefault(a),uwp_modal_login_form_2fa_process("form.validate_2fa_form","")})),jQuery(".uwp-auth-modal .modal-content form.validate_2fa_backup_codes_form").on("submit",(function(a){a.preventDefault(a),uwp_modal_login_form_2fa_process("form.validate_2fa_backup_codes_form","")})),jQuery(".uwp-auth-modal .modal-content .uwp-2fa-email-resend").on("click",(function(a){a.preventDefault(a),uwp_modal_login_form_2fa_process("form.validate_2fa_form","&wp-2fa-email-code-resend=1")}))):a.data.redirect?setTimeout((function(){location.href=a.data.redirect}),1e3):setTimeout((function(){location.reload()}),1e3)):!1===a.success&&(jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data),jQuery(".uwp-auth-modal .modal-content .uwp_login_submit").html($button_text).prop("disabled",!1),uwp_maybe_reset_recaptcha()),uwp_init_auth_modal()}})}function uwp_modal_login_form_2fa_process(a,e){var t=jQuery(".modal-content "+a).serialize()+"&action=uwp_ajax_login_process_2fa"+e;$button=jQuery(".uwp-auth-modal .modal-content "+a).find(".uwp-2fa-submit"),$button_text=$button.html(),jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:t,beforeSend:function(){$button.html('<i class="fas fa-circle-notch fa-spin"></i> '+$button_text).prop("disabled",!0),jQuery(".uwp-auth-modal .modal-content .modal-error").html("")},success:function(a){1==a.success?($button.html($button_text).prop("disabled",!0),jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data.message),a.data.redirect?setTimeout((function(){location.href=a.data.redirect}),1e3):setTimeout((function(){location.reload()}),1e3)):!1===a.success&&(jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data.message),$button.html($button_text).prop("disabled",!1)),uwp_init_auth_modal()}})}function uwp_modal_register_form(a){var e={action:"uwp_ajax_register_form",form_id:a};jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:e,beforeSend:function(){uwp_modal_loading(6)},success:function(a){a.success&&(jQuery(".uwp-auth-modal .modal-content").html(a.data),setTimeout((function(){jQuery(".uwp-auth-modal .modal-content input:visible:enabled:first").focus().unbind("focus")}),300),jQuery(".uwp-auth-modal .modal-content form.uwp-registration-form").submit((function(a){a.preventDefault(a),uwp_modal_register_form_process()}))),uwp_init_auth_modal(),aui_init_select2(),uwp_switch_reg_form_init(),aui_init()}})}function uwp_load_register_form(a,e,t){var o={action:"uwp_ajax_register_form",form_id:a};jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:o,beforeSend:function(){jQuery(document).trigger("uwp_form_loading",{form_id:a,form:e}),t&&t.addClass("active");var o=e.find("input, select, textarea").not("#uwp-form-type-select");o.each((function(){jQuery(this).replaceWith('<div class="badge badge-pill badge-light p-3 mt-3 w-100 bg-loading">&nbsp;</div>')})),e.children().not(".badge, #uwp-form-select").remove()},success:function(t){if(t.success){var o=jQuery(t.data).find("form"),r=e.find("#uwp-form-select");e.html(o.html()),o.find("#uwp-form-select").length||o.find("#uwp-form-select-ajax").length||!r||e.prepend(r),e.find("#uwp-form-select-ajax").attr("id","uwp-form-select"),jQuery(document).trigger("uwp_form_loaded",{form_id:a,form:e,html:t.data})}uwp_init_auth_modal(),aui_init_select2(),uwp_switch_reg_form_init()}})}function uwp_switch_reg_form_init(){jQuery("#uwp-form-select-ajax a").off("click.uwpSwitchRegForm").on("click.uwpSwitchRegForm",(function(a){a.preventDefault(a),uwp_modal_register_form(jQuery(this).attr("data-form_id"))})),jQuery("#uwp-form-select-ajax select#uwp-form-type-select").off("change.uwpSwitchRegForm").on("change.uwpSwitchRegForm",(function(a){uwp_modal_register_form(jQuery(this).find("option:selected").attr("data-form_id"))})),jQuery("#uwp-form-select a").off("click.uwpSwitchRegForm").on("click.uwpSwitchRegForm",(function(a){a.preventDefault(a);var e=jQuery(this),t=e.attr("data-form_id"),o=e.parents("form");jQuery("#uwp-form-select a").removeClass("active"),uwp_load_register_form(t,o,e)})),jQuery("#uwp-form-select select#uwp-form-type-select").off("change.uwpSwitchRegForm").on("change.uwpSwitchRegForm",(function(a){var e=jQuery(this);uwp_load_register_form(e.find("option:selected").attr("data-form_id"),e.parents("form"))}))}function uwp_modal_register_form_process(){var a=jQuery(".modal-content form.uwp-registration-form").serialize()+"&action=uwp_ajax_register";$button=jQuery(".uwp-auth-modal .modal-content .uwp_register_submit"),$button_text=$button.html(),jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:a,beforeSend:function(){return $button.html('<i class="fas fa-circle-notch fa-spin"></i> '+$button_text).prop("disabled",!0),jQuery(".uwp-auth-modal .modal-content .modal-error").html(""),uwp_maybe_check_recaptcha("register")},success:function(a){a.success?($button.html($button_text).prop("disabled",!0),a.data.message?(jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data.message),jQuery(".modal-content form.uwp-registration-form").trigger("reset"),setTimeout((function(){a.data.redirect&&(window.location=a.data.redirect)}),3e3)):jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data.message)):!1===a.success&&(jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data.message),$button.html($button_text).prop("disabled",!1),uwp_maybe_reset_recaptcha()),uwp_init_auth_modal(),aui_init_select2(),uwp_switch_reg_form_init()}})}function uwp_modal_forgot_password_form(){jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:{action:"uwp_ajax_forgot_password_form"},beforeSend:function(){uwp_modal_loading(2)},success:function(a){a.success&&(jQuery(".uwp-auth-modal .modal-content").html(a.data),setTimeout((function(){jQuery(".uwp-auth-modal .modal-content input:visible:enabled:first").focus().unbind("focus")}),300),jQuery(".uwp-auth-modal .modal-content form.uwp-forgot-form").on("submit",(function(a){a.preventDefault(a),uwp_modal_forgot_password_form_process()}))),uwp_init_auth_modal()}})}function uwp_modal_forgot_password_form_process(){var a=jQuery(".modal-content form.uwp-forgot-form").serialize()+"&action=uwp_ajax_forgot_password";$button=jQuery(".uwp-auth-modal .modal-content .uwp_forgot_submit"),$button_text=$button.html(),jQuery.ajax({type:"POST",url:uwp_localize_data.ajaxurl,data:a,beforeSend:function(){return $button.html('<i class="fas fa-circle-notch fa-spin"></i> '+$button_text).prop("disabled",!0),jQuery(".uwp-auth-modal .modal-content .modal-error").html(""),uwp_maybe_check_recaptcha("forgot")},success:function(a){a.success?($button.html($button_text).prop("disabled",!0),jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data),setTimeout((function(){jQuery(".uwp-auth-modal").modal("hide")}),2e3)):!1===a.success&&(jQuery(".uwp-auth-modal .modal-content .modal-error").html(a.data),$button.html($button_text).prop("disabled",!1),uwp_maybe_reset_recaptcha()),uwp_init_auth_modal()}})}function uwp_checkPasswordStrength(a,e,t,o,r){var u=a.val(),l=e.val();!jQuery("#uwp-password-strength").length&&u?(e.length?$container=e.closest(".uwp-password-wrap"):$container=a.closest(".uwp-password-wrap"),$container.append('<div class="progress mt-1"><div id="uwp-password-strength" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0;"></div></div>'),t=jQuery("#uwp-password-strength")):u||l||t.parent().remove(),parseInt(uwp_localize_data.uwp_pass_strength)>0&&o.attr("disabled","disabled"),t.removeClass("short bad good strong bg-warning bg-success bg-danger"),r=r.concat(wp.passwordStrength.userInputDisallowedList());var n=wp.passwordStrength.meter(u,r,l);switch(n){case-1:t.addClass("short bg-danger").html(pwsL10n.unknown);break;case 2:t.addClass("bad bg-warning").html(pwsL10n.bad).width("50%");break;case 3:t.addClass("good bg-success").html(pwsL10n.good).width("75%");break;case 4:t.addClass("strong bg-success").html(pwsL10n.strong).width("100%");break;case 5:t.addClass("short bg-danger").html(pwsL10n.mismatch).width("25%");break;default:t.addClass("short bg-danger").html(pwsL10n.short).width("25%")}return parseInt(uwp_localize_data.uwp_pass_strength)>0&&(e.length?$container=e.closest(".uwp-password-wrap"):$container=a.closest(".uwp-password-wrap"),$container.find("small").remove(),4==parseInt(uwp_localize_data.uwp_pass_strength)&&4===n?o.removeAttr("disabled"):3!=parseInt(uwp_localize_data.uwp_pass_strength)||3!==n&&4!==n?$container.append("<small>"+uwp_localize_data.uwp_strong_pass_msg+"</small>"):o.removeAttr("disabled")),n}function uwp_cancelBubble(a){var e=a||window.event;e.stopPropagation&&e.stopPropagation(),null!=e.cancelBubble&&(e.cancelBubble=!0)}function uwp_gd_delete_post(a){var e=geodir_params.my_place_listing_del;return!!confirm(e)&&(jQuery.ajax({url:uwp_localize_data.ajaxurl,type:"POST",dataType:"json",data:{action:"geodir_user_delete_post",security:geodir_params.basic_nonce,post_id:a},timeout:2e4,success:function(a){if(a.success)var e='<div class="alert alert-success m-0"><i class="fas fa-check-circle"></i> '+a.data.message+"</div>";else e='<div class="alert alert-danger m-0"><i class="fas fa-exclamation-circle"></i> '+a.data.message+"</div>";var t='<div class="modal fade uwp-gd-modal bsui" tabindex="-1" role="dialog" aria-labelledby="uwp-gd-modal-title" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content">'+e+"</div></div></div>";(jQuery(".uwp-gd-modal").length?jQuery(".uwp-gd-modal .modal-content").html(e):jQuery("body").append(t),window.bootstrap&&window.bootstrap.Modal)?new window.bootstrap.Modal(document.querySelector(".uwp-gd-modal")).show():jQuery(".uwp-gd-modal").modal();a.success&&setTimeout((function(){location.reload()}),3e3)}}),!0)}jQuery(window).on("load",(function(){uwp_init_auth_modal(),uwp_switch_reg_form_init()})),function(a,e,t){a(document).ready((function(){var e=uwp_localize_data.uwp_more_char_limit,t=uwp_localize_data.uwp_more_ellipses_text,o=uwp_localize_data.uwp_more_text,r=uwp_localize_data.uwp_less_text;if(a(".uwp_more").each((function(){var r=a.trim(a(this).text()),u=a(this).data("maxchar");if(u>0&&(e=u),r.length>e){var l=r.substr(0,e),n=r.substr(e,r.length-e),s=uwp_nl2br(l)+'<span class="uwp_more_ellipses">'+t+'&nbsp;</span><span class="uwp_more_content"><span style="display: none;">'+uwp_nl2br(n)+'</span>&nbsp;&nbsp;<a href="" class="uwp_more_link">'+o+"</a></span>";a(this).html(s)}})),a(".uwp_more_link").on("click",(function(){return a(this).hasClass("uwp_less")?(a(this).removeClass("uwp_less"),a(this).html(o)):(a(this).addClass("uwp_less"),a(this).html(r)),a(this).parent().prev().toggle(),a(this).prev().toggle(),!1})),"undefined"!=typeof Storage){var u="uwp_list_view",l=jQuery(".uwp-users-loop > .row");l.length||(l=jQuery(".uwp-profile-cpt-loop > .row"),u="uwp_cpt_list_view");var n=!1,s=localStorage.getItem(u);setTimeout((function(){s||(n=!0,s=l.hasClass("row-cols-md-0")?0:l.hasClass("row-cols-md-1")?1:l.hasClass("row-cols-md-2")?2:l.hasClass("row-cols-md-3")?3:l.hasClass("row-cols-md-4")?4:l.hasClass("row-cols-md-5")?5:3),uwp_list_view_select(s,n)}),10)}}))}(jQuery,window),function(a,e,t){a(document).ready((function(){a(".uwp-profile-modal-form-trigger").on("click",(function(e){e.preventDefault();var t={action:"uwp_ajax_image_crop_popup_form",type:a(this).data("type")},o=jQuery("#uwp-popup-modal-wrap");o.show(),jQuery.post(uwp_localize_data.ajaxurl,t,(function(e){a(document.body).append("<div id='uwp-modal-backdrop'></div>"),o.replaceWith(e)}))}))})),a(document).ready((function(){a(".uwp_upload_file_remove").on("click",(function(e){e.preventDefault();var t=a(this).data("htmlvar"),o=a(this).data("uid"),r={action:"uwp_upload_file_remove",htmlvar:t,uid:o,security:uwp_localize_data.basicNonce};jQuery.ajax({url:uwp_localize_data.ajaxurl,type:"POST",data:r,dataType:"json"}).done((function(e,o,r){"object"==typeof e&&e.success&&(a("#"+t+"_row").find(".uwp_file_preview_wrap").remove(),a("#"+t).closest("td").find(".uwp_file_preview_wrap").remove(),a("input[name="+t+"]").data("is-required")&&a("input[name="+t+"]").prop("required",!0))}))}))}))}(jQuery,window),function(a,e,t){a(document).ready((function(){function e(e){a("#uwp_login_modal .uwp-login-ajax-notice").remove();var t=jQuery(e).serialize()+"&action=uwp_ajax_login";jQuery.post(uwp_localize_data.ajaxurl,t,(function(e){(e=jQuery.parseJSON(e)).error?a("#uwp_login_modal form.uwp-login-form").before(e.message):(a("#uwp_login_modal form.uwp-login-form").before(e.message),setTimeout((function(){location.reload()}),1200))}))}a("#uwp_layout").on("change",(function(){var e=a(this).val(),t=a("#uwp_user_items_layout");t.removeClass(),"list"==e?t.addClass("uwp-users-list-wrap uwp_listview"):"2col"==e?t.addClass("uwp-users-list-wrap uwp_gridview uwp_gridview_2col"):"3col"==e?t.addClass("uwp-users-list-wrap uwp_gridview uwp_gridview_3col"):"4col"==e?t.addClass("uwp-users-list-wrap uwp_gridview uwp_gridview_4col"):"5col"==e?t.addClass("uwp-users-list-wrap uwp_gridview uwp_gridview_5col"):t.addClass("uwp-users-list-wrap uwp_listview")})),jQuery(document).ready((function(a){a("#uwp_login_modal form.uwp-login-form").on("submit",(function(a){a.preventDefault(),e(this)}))}))}))}(jQuery,window);
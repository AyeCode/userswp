function uwp_data_type_changed(e,a){e&&a&&(jQuery("#licontainer_"+a).find(".decimal-point-wrapper").hide(),"FLOAT"==jQuery(e).val()&&jQuery("#licontainer_"+a).find(".decimal-point-wrapper").show(),"FLOAT"==jQuery(e).val()||"INT"==jQuery(e).val()?(jQuery("#licontainer_"+a).find(".uwp-price-extra-set").show(),"1"==jQuery("#licontainer_"+a).find(".uwp-price-extra-set input[name='extra[is_price]']:checked").val()&&jQuery("#licontainer_"+a).find(".uwp-price-extra").show()):(jQuery("#licontainer_"+a).find(".uwp-price-extra-set").hide(),jQuery("#licontainer_"+a).find(".uwp-price-extra").hide()))}function save_field(e,a){if(form_id=jQuery(".manage_field_form_id").val(),form_id_param="&form_id="+form_id,"profile_tab"==a)var i="uwp_ajax_profile_tabs_action",t="profile_tab";else if("register"==a)var i="uwp_ajax_register_action",t="register";else var i="uwp_ajax_action",t="custom_fields";if(jQuery("#licontainer_"+e+" #htmlvar_name").length>0){var r=jQuery("#licontainer_"+e+" #htmlvar_name").val();if(""!=r)for(var _=0;_<r.length;_++)if(-1!="!`@#$%^&*()+=-[]\\';,./{}|\":<>?~ ".indexOf(r.charAt(_)))return alert(uwp_admin_ajax.custom_field_not_special_char),!1;var l=jQuery("#licontainer_"+e+" #option_values");if(1==l.length){if(""==l.val())return alert(uwp_admin_ajax.custom_field_options_not_blank_var),!1}}var n="create_field=true&field_ins_upd=submit&"+jQuery("#licontainer_"+e).find("select, textarea, input").serialize();jQuery.ajax({url:uwp_admin_ajax.url+"?action="+i+"&manage_field_type="+t+form_id_param,type:"POST",data:n,success:function(r){if("invalid_key"==jQuery.trim(r))alert(uwp_admin_ajax.custom_field_unique_name);else{if(jQuery("#licontainer_"+e).replaceWith(jQuery.trim(r)),aui_init_select2(),uwp_init_tooltips(),"profile_tab"==a){var _=jQuery(".field_row_main ul.core").nestedSortable("toArray",{startDepthCount:0}),l={};jQuery.each(_,function(e,a){a.id&&(l[e]={id:a.id,tab_level:a.depth,tab_parent:a.parent_id})});var n={tabs:l};jQuery.get(uwp_admin_ajax.url+"?action="+i+"&create_field=true&update=update&manage_field_type="+t,n,function(e){})}else{var u=jQuery(".field_row_main ul.core").sortable("serialize")+"&update=update&manage_field_type="+t+form_id_param;jQuery.get(uwp_admin_ajax.url+"?action="+i+"&create_field=true",u,function(e){})}jQuery(".field_frm").hide()}}})}function delete_field(e,a,i,t){if(form_id=jQuery(".manage_field_form_id").val(),form_id_param="&form_id="+form_id,"profile_tab"==t)var r="uwp_ajax_profile_tabs_action",_="profile_tab";else if("register"==t)var r="uwp_ajax_register_action",_="register";else var r="uwp_ajax_action",_="custom_fields";1==confirm(uwp_admin_ajax.custom_field_delete)&&("new"==e.substring(0,3)?jQuery("#licontainer_"+e).remove():(jQuery.get(uwp_admin_ajax.url+"?action="+r+"&create_field=true&manage_field_type="+_+form_id_param,{field_id:e,form_id:form_id,field_ins_upd:"delete",_wpnonce:a},function(){jQuery("#licontainer_"+e).remove()}),jQuery("#uwp-"+i).closest("li").show()))}jQuery(document).ready(function(){jQuery("#uwp-form-builder-tab-existing, #uwp-form-builder-tab, #uwp-form-builder-tab-predefined, #uwp-form-builder-tab-custom").find("ul li a").click(function(){if(jQuery(this).attr("id")){var e=jQuery(this).attr("id").replace("uwp-",""),a=e,i=jQuery(this).data("field-type"),t=jQuery(this).data("field-type-key"),r=jQuery(this).closest("#uwp-form-builder-tab, #uwp-form-builder-tab-predefined").find("#form_type").val(),_="new"+jQuery(".field_row_main ul.core").children("li:last-child").index()+1,l=jQuery(this).closest("#uwp-available-fields").find(".manage_field_type").val(),n=jQuery(this).data("data_type"),u=jQuery(this).data("field-custom-type"),d=jQuery(".manage_field_form_id").val(),o={htmlvar_name:e,field_type:i,field_type_key:t,form_type:r,field_id:_,field_ins_upd:"new",manage_field_type:l,field_data_type:n,custom_type:u,form_id:d};if("register"==l)s="uwp_ajax_register_action";else if("search"==l)s="uwp_ajax_search_action";else if("profile_tabs"==l){s="uwp_ajax_profile_tabs_action";o={htmlvar_name:e,form_type:r,field_type:i,field_ins_upd:"new",tab_layout:jQuery(this).data("tab_layout"),tab_level:jQuery(this).data("tab_level"),tab_parent:jQuery(this).data("tab_parent"),tab_name:jQuery(this).data("tab_name"),tab_type:jQuery(this).data("tab_type"),tab_icon:jQuery(this).data("tab_icon"),tab_key:jQuery(this).data("tab_key"),tab_content:jQuery(this).data("tab_content"),tab_privacy:jQuery(this).data("tab_privacy"),user_decided:jQuery(this).data("user_decided"),form_id:d}}else{var s="uwp_ajax_action";e=_}jQuery.get(uwp_admin_ajax.url+"?action="+s+"&create_field=true",o,function(a){console.log(_),jQuery(".field_row_main ul.core").append(a),jQuery("#licontainer_"+e).find("#sort_order").val(parseInt(jQuery("#licontainer_"+e).index())+1),uwp_show_hide(jQuery("#licontainer_"+e).find(".toggle-arrow")),aui_init_select2(),uwp_init_tooltips(),jQuery("html, body").animate({scrollTop:jQuery("#licontainer_"+e).offset().top},1e3),"register"==l&&save_field(e,"register"),"search"==l&&save_search_field(e)}),jQuery("#uwp-form-builder-tab-existing #uwp-"+a).length>0&&jQuery("#uwp-form-builder-tab-existing #uwp-"+a).closest("li").hide(),"fieldset"==e||"register"!=l&&"search"!=l||jQuery(this).closest("li").hide()}}),jQuery("ul.uwp-tabs-selected").sortable({opacity:.8,cursor:"move",placeholder:"ui-state-highlight",cancel:"input,label,select",update:function(){var e=jQuery(this).closest("#uwp-selected-fields").find(".manage_field_type").val(),a=jQuery(this).sortable("serialize")+"&update=update&manage_field_type="+e;if(form_id=jQuery(".manage_field_form_id").val(),form_id_param="&form_id="+form_id,"register"==e)i="uwp_ajax_register_action";else if("search"==e)i="uwp_ajax_search_action";else var i="uwp_ajax_action";jQuery.get(uwp_admin_ajax.url+"?action="+i+"&create_field=true",a+form_id_param,function(e){console.log("Fields have been ordered.")})}}),jQuery("ul.uwp-profile-tabs-selected").nestedSortable({maxLevels:2,handle:".uwp-fieldset",items:"li",disableNestingClass:"mjs-nestedSortable-no-nesting",helper:"clone",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,listType:"ul",update:function(e,a){var i=jQuery(this).closest("#uwp-selected-fields").find(".manage_field_type").val(),t=jQuery(".field_row_main ul.core").nestedSortable("toArray",{startDepthCount:0}),r={},_=jQuery(".manage_field_form_id").val();jQuery.each(t,function(e,a){a.id&&(r[e]={id:a.id,tab_level:a.depth,tab_parent:a.parent_id})});var l={tabs:r,form_id:_};jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_profile_tabs_action&create_field=true&update=update&manage_field_type="+i,l,function(e){})}})});
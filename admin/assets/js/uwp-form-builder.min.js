function uwp_data_type_changed(e,t){e&&t&&(jQuery("#licontainer_"+t).find(".decimal-point-wrapper").hide(),"FLOAT"==jQuery(e).val()&&jQuery("#licontainer_"+t).find(".decimal-point-wrapper").show(),"FLOAT"==jQuery(e).val()||"INT"==jQuery(e).val()?(jQuery("#licontainer_"+t).find(".uwp-price-extra-set").show(),"1"==jQuery("#licontainer_"+t).find(".uwp-price-extra-set input[name='extra[is_price]']:checked").val()&&jQuery("#licontainer_"+t).find(".uwp-price-extra").show()):(jQuery("#licontainer_"+t).find(".uwp-price-extra-set").hide(),jQuery("#licontainer_"+t).find(".uwp-price-extra").hide()))}function save_field(e,t){if(form_id_param="&form_id="+(form_id=jQuery(".manage_field_form_id").val()),"profile_tab"==t)var a="uwp_ajax_profile_tabs_action",i="profile_tab";else if("register"==t)var a="uwp_ajax_register_action",i="register";else if("user_sorting"==t)var a="uwp_ajax_user_sorting_action",i="user_sorting";else var a="uwp_ajax_action",i="custom_fields";if(jQuery("#licontainer_"+e+" #htmlvar_name").length>0){var r=jQuery("#licontainer_"+e+" #htmlvar_name").val();if(""!=r){for(var l=0;l<r.length;l++)if(-1!="!`@#$%^&*()+=-[]\\';,./{}|\":<>?~ ".indexOf(r.charAt(l)))return alert(uwp_admin_ajax.custom_field_not_special_char),!1}var n=jQuery("#licontainer_"+e+" #option_values");if(1==n.length&&""==n.val())return alert(uwp_admin_ajax.custom_field_options_not_blank_var),!1}var d=jQuery("#licontainer_"+e).find("select, textarea, input").serialize();jQuery.ajax({url:uwp_admin_ajax.url+"?action="+a+"&manage_field_type="+i+form_id_param,type:"POST",data:"create_field=true&field_ins_upd=submit&"+d,success:function(r){if("invalid_key"==jQuery.trim(r))alert(uwp_admin_ajax.custom_field_unique_name);else{if(jQuery("#licontainer_"+e).replaceWith(jQuery.trim(r)),aui_init_select2(),uwp_init_tooltips(),"profile_tab"==t){var l=jQuery(".field_row_main ul.core").nestedSortable("toArray",{startDepthCount:0}),n={};jQuery.each(l,function(e,t){t.id&&(n[e]={id:t.id,tab_level:t.depth,tab_parent:t.parent_id})});var d={tabs:n,_wpnonce:jQuery("#uwp-admin-settings").val()};jQuery.get(uwp_admin_ajax.url+"?action="+a+"&create_field=true&update=update&manage_field_type="+i,d,function(e){})}else{var s=jQuery(".field_row_main ul.core").sortable("serialize")+"&update=update&manage_field_type="+i+form_id_param;jQuery.get(uwp_admin_ajax.url+"?action="+a+"&create_field=true",s,function(e){})}jQuery(".field_frm").hide()}}})}function delete_field(e,t,a,i){if(form_id_param="&form_id="+(form_id=jQuery(".manage_field_form_id").val()),"profile_tab"==i)var r="uwp_ajax_profile_tabs_action",l="profile_tab";else if("register"==i)var r="uwp_ajax_register_action",l="register";else if("user_sorting"==i)var r="uwp_ajax_user_sorting_action",l="user_sorting";else var r="uwp_ajax_action",l="custom_fields";!0==confirm(uwp_admin_ajax.custom_field_delete)&&("new"==e.substring(0,3)?jQuery("#licontainer_"+e).remove():(jQuery.get(uwp_admin_ajax.url+"?action="+r+"&create_field=true&manage_field_type="+l+form_id_param,{field_id:e,form_id:form_id,field_ins_upd:"delete",_wpnonce:t},function(){jQuery("#licontainer_"+e).remove()}),jQuery("#uwp-"+a).closest("li").show()))}jQuery(document).ready(function(){jQuery("#uwp-form-builder-tab-existing, #uwp-form-builder-tab, #uwp-form-builder-tab-predefined, #uwp-form-builder-tab-custom").find("ul li a").click(function(){if(jQuery(this).attr("id")){var e=jQuery(this).attr("id").replace("uwp-",""),t=e,a=jQuery(this).data("field-type"),i=jQuery(this).data("field-type-key"),r=jQuery(this).closest("#uwp-form-builder-tab, #uwp-form-builder-tab-predefined").find("#form_type").val(),l="new"+jQuery(".field_row_main ul.core").children("li:last-child").index()+"1",n=jQuery(this).closest("#uwp-available-fields").find(".manage_field_type").val(),d=jQuery(this).data("data_type"),s=jQuery(this).data("field-custom-type"),o=jQuery(".manage_field_form_id").val(),f=jQuery("#uwp-admin-settings").val(),p={htmlvar_name:e,field_type:a,field_type_key:i,form_type:r,field_id:l,field_ins_upd:"new",manage_field_type:n,field_data_type:d,custom_type:s,form_id:o,_wpnonce:f};if("register"==n)var c="uwp_ajax_register_action";else if("search"==n)var c="uwp_ajax_search_action";else if("profile_tabs"==n){var c="uwp_ajax_profile_tabs_action";p={htmlvar_name:e,form_type:r,field_type:a,field_ins_upd:"new",tab_layout:jQuery(this).data("tab_layout"),tab_level:jQuery(this).data("tab_level"),tab_parent:jQuery(this).data("tab_parent"),tab_name:jQuery(this).data("tab_name"),tab_type:jQuery(this).data("tab_type"),tab_icon:jQuery(this).data("tab_icon"),tab_key:jQuery(this).data("tab_key"),tab_content:jQuery(this).data("tab_content"),tab_privacy:jQuery(this).data("tab_privacy"),user_decided:jQuery(this).data("user_decided"),form_id:o,_wpnonce:f}}else if("user_sorting"==n){var c="uwp_ajax_user_sorting_action";p={htmlvar_name:e,form_type:r,field_type:jQuery(this).data("field_type"),field_ins_upd:"new",data_type:jQuery(this).data("data_type"),tab_level:jQuery(this).data("tab_level"),tab_parent:jQuery(this).data("tab_parent"),field_icon:jQuery(this).data("field_icon"),site_title:jQuery(this).data("site_title"),sort:jQuery(this).data("sort"),_wpnonce:f}}else{var c="uwp_ajax_action";e=l}jQuery.get(uwp_admin_ajax.url+"?action="+c+"&create_field=true",p,function(t){console.log(l),jQuery(".field_row_main ul.core").append(t),jQuery("#licontainer_"+e).find("#sort_order").val(parseInt(jQuery("#licontainer_"+e).index())+1),uwp_show_hide(jQuery("#licontainer_"+e).find(".toggle-arrow")),aui_init_select2(),uwp_init_tooltips(),jQuery("html, body").animate({scrollTop:jQuery("#licontainer_"+e).offset().top},1e3),"register"==n&&save_field(e,"register"),"search"==n&&save_search_field(e)}),jQuery("#uwp-form-builder-tab-existing #uwp-"+t).length>0&&jQuery("#uwp-form-builder-tab-existing #uwp-"+t).closest("li").hide(),"fieldset"!=e&&("register"==n||"search"==n)&&jQuery(this).closest("li").hide()}}),jQuery("ul.uwp-tabs-selected").sortable({opacity:.8,cursor:"move",placeholder:"ui-state-highlight",cancel:"input,label,select",update:function(){var e=jQuery(this).closest("#uwp-selected-fields").find(".manage_field_type").val(),t=jQuery(this).sortable("serialize")+"&update=update&manage_field_type="+e;if(form_id_param="&form_id="+(form_id=jQuery(".manage_field_form_id").val()),"register"==e)var a="uwp_ajax_register_action";else if("search"==e)var a="uwp_ajax_search_action";else var a="uwp_ajax_action";jQuery.get(uwp_admin_ajax.url+"?action="+a+"&create_field=true",t+form_id_param,function(e){console.log("Fields have been ordered.")})}}),jQuery("ul.uwp-profile-tabs-selected").nestedSortable({maxLevels:2,handle:".uwp-fieldset",items:"li",disableNestingClass:"mjs-nestedSortable-no-nesting",helper:"clone",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,listType:"ul",update:function(e,t){var a=jQuery(this).closest("#uwp-selected-fields").find(".manage_field_type").val(),i=jQuery(".field_row_main ul.core").nestedSortable("toArray",{startDepthCount:0}),r={},l=jQuery(".manage_field_form_id").val();if(jQuery.each(i,function(e,t){t.id&&(r[e]={id:t.id,tab_level:t.depth,tab_parent:t.parent_id})}),"user_sorting"==a)var n="uwp_ajax_user_sorting_action";else var n="uwp_ajax_profile_tabs_action";var d={tabs:r,form_id:l,_wpnonce:jQuery("#uwp-admin-settings").val()};jQuery.get(uwp_admin_ajax.url+"?action="+n+"&create_field=true&update=update&manage_field_type="+a,d,function(e){})}})});
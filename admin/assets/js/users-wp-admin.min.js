function aui_fa_select_format(e){if(!e.id)return e.text;return'<i class="fa-lg '+jQuery(e.element).attr("data-fa-icon")+'"></i>  '+e.text}function uwp_show_hide(e){var t=!jQuery(e).parent(".li-settings").find(".field_frm").first().is(":hidden");jQuery(".field_frm").hide(),jQuery(".field_frm").parent().parent().find(".toggle-arrow").addClass("fa-caret-down").removeClass("fa-caret-up"),t?(jQuery(e).addClass("fa-caret-down").removeClass("fa-caret-up"),jQuery(e).parent(".li-settings").find(".field_frm").first().hide().removeClass("uwp-tab-settings-open")):(jQuery(e).addClass("fa-caret-up").removeClass("fa-caret-down"),jQuery(e).parent(".li-settings").find(".field_frm").first().show().addClass("uwp-tab-settings-open"))}function uwp_init_advanced_settings(){jQuery(".uwp-advanced-toggle").off("click").click(function(){jQuery(".uwp-advanced-toggle").toggleClass("uwpa-hide"),console.log("toggle"),jQuery(".uwp-advanced-setting, #default_location_set_address_button").toggleClass("uwpa-show")})}function uwp_init_tooltips(){var e=jQuery(".uwp-help-tip").tooltip(),t=uwp_tooltip_version()>=4?"dispose":"destroy";e.tooltip(t).tooltip({content:function(){return jQuery(this).prop("title")},tooltipClass:"uwp-ui-tooltip",position:{my:"center top",at:"center bottom+10",collision:"flipfit"},show:null,close:function(e,t){t.tooltip.hover(function(){jQuery(this).stop(!0).fadeTo(400,1)},function(){jQuery(this).fadeOut("400",function(){jQuery(this).remove()})})}})}function uwp_tooltip_version(){var e=0;return"object"==typeof jQuery.fn&&"function"==typeof jQuery.fn.tooltip&&"function"==typeof jQuery.fn.tooltip.Constructor&&void 0!==jQuery.fn.tooltip.Constructor.VERSION&&(e=parseFloat(jQuery.fn.tooltip.Constructor.VERSION)),e}function uwp_get_spin_loader(e){e.append('<i class="fas fa-circle-notch fa-spin ml-2 userswp-admin-spin"></i>')}function uwp_remove_spin_loader(e){setTimeout(function(){e.children("i.userswp-admin-spin").remove()},1e3)}jQuery(window).on("load",function(){var e=jQuery(".uwp-color-picker");e.length&&e.wpColorPicker(),jQuery(".uwp-upload-img").each(function(){var e=jQuery(this),t=e.data("field");jQuery('[name="'+t+'[id]"]').length&&!jQuery('[name="'+t+'[id]"]').val()&&jQuery(".uwp_remove_image_button",e).hide()});var t=[];jQuery(document).on("click",".uwp_upload_image_button",function(e){e.preventDefault();var a=jQuery(this).closest(".uwp-upload-img"),r=a.data("field");r&&(t&&t[r]?t[r].open():(t[r]=wp.media.frames.downloadable_file=wp.media({title:uwp_admin_ajax.txt_choose_image,button:{text:uwp_admin_ajax.txt_use_image},multiple:!1}),t[r].on("select",function(){var e=t[r].state().get("selection").first().toJSON(),o=e.sizes.medium||e.sizes.full;r&&(jQuery('[name="'+r+'[id]"]').length&&jQuery('[name="'+r+'[id]"]').val(e.id),jQuery('[name="'+r+'[src]"]').length&&jQuery('[name="'+r+'[src]"]').val(e.url),jQuery('[name="'+r+'"]').length&&jQuery('[name="'+r+'"]').val(e.id)),a.closest(".form-field.form-invalid").removeClass("form-invalid"),jQuery(".uwp-upload-display",a).find("img").attr("src",o.url),jQuery(".uwp_remove_image_button").show()}),t[r].open()))}),jQuery(document).on("click",".uwp_remove_image_button",function(){var e=jQuery(this),t=e.closest(".uwp-upload-img"),a=t.data("field");return jQuery(".uwp-upload-display",t).find("img").attr("src",uwp_admin_ajax.img_spacer).removeAttr("width height sizes alt class srcset"),a&&(jQuery('[name="'+a+'[id]"]').length>0&&(jQuery('[name="'+a+'[id]"]').val(""),jQuery('[name="'+a+'[src]"]').val("")),jQuery('[name="'+a+'"]').length>0&&jQuery('[name="'+a+'"]').val("")),e.hide(),!1}),jQuery(".userswp .forminp .large-text").focus(function(){var e=jQuery(this).attr("placeholder");""==jQuery(this).val()&&jQuery(this).val(e)}).blur(function(){var e=jQuery(this).attr("placeholder");jQuery(this).val()==e&&jQuery(this).val("")}),jQuery(document).on("click",".userswp span code",function(e){jQuery("span code").removeClass("uwp-tag-copied"),jQuery("span code span").remove(),jQuery(this).addClass("uwp-tag-copied"),jQuery(this).append("<span></span>");var t=jQuery("<input>");jQuery("body").append(t),t.val(jQuery(this).text()).select(),document.execCommand("copy"),t.remove(),setTimeout(function(){jQuery("span code").removeClass("uwp-tag-copied"),jQuery("span code span").remove()},1e3)}),jQuery("input.uwp-seo-meta-separator").on("change",function(){"checked"===jQuery(this).attr("checked")&&(jQuery("input.uwp-seo-meta-separator").parent().removeClass("active"),jQuery(this).parent().addClass("active"))}).change(),jQuery(".aui-fa-select2").select2({templateResult:aui_fa_select_format,templateSelection:function(e){if(e.id.length>0){return"<i class='fa-lg "+jQuery(e.element).attr("data-fa-icon")+"'></i>  "+e.text}return e.text},escapeMarkup:function(e){return e}}),jQuery(document).on("click",".register-show-options",function(e){jQuery("#uwp-form-more-options").toggle("fast",function(){})}),jQuery(document).on("click",".register-form-create",function(e){var t=jQuery(this),a=t.attr("data-nonce");uwp_get_spin_loader(t);var r=prompt(uwp_admin_ajax.ask_register_form_title);if(null!==r)if(""!==r){var o={action:"uwp_ajax_create_register",type:"create",form_title:r,nonce:a};jQuery.post(uwp_admin_ajax.url,o,function(e){(e=JSON.parse(e)).status?(uwp_remove_spin_loader(t),window.location.replace(e.redirect)):console.log(e.message)})}else uwp_remove_spin_loader(t);else uwp_remove_spin_loader(t)}),jQuery(document).on("submit","#uwp_user_type_form",function(e){e.preventDefault();var t=jQuery(this).serialize()+"&action=uwp_ajax_update_register&type=update",a=jQuery("button[type=submit]",this);uwp_get_spin_loader(a),jQuery.post(uwp_admin_ajax.url,t,function(e){e=JSON.parse(e),uwp_remove_spin_loader(a),e.status?(a.after('<b class="ml-1 text-success">'+uwp_admin_ajax.form_updated_msg+"</b>"),location.reload()):console.log(e.message)})}),jQuery(document).on("click",".register-form-remove",function(e){var t=jQuery(this),a=t.attr("data-id"),r=t.attr("data-nonce");uwp_get_spin_loader(t);if(!0===confirm(uwp_admin_ajax.delete_register_form)){var o={action:"uwp_ajax_remove_register",type:"remove",form_id:a,nonce:r};jQuery.post(uwp_admin_ajax.url,o,function(e){(e=JSON.parse(e)).status?(uwp_remove_spin_loader(t),window.location.replace(e.redirect)):console.log(e.message)})}else uwp_remove_spin_loader(t)}),uwp_init_tooltips()});
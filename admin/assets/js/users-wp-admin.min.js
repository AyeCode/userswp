function uwp_select2(){jQuery("select.uwp_select2").length>0&&(jQuery("select.uwp_select2").select2(),jQuery("select.uwp_select2_nostd").select2({allow_single_deselect:"true"}))}function uwp_show_hide(e){var t=!jQuery(e).parent(".li-settings").find(".field_frm").is(":hidden");jQuery(".field_frm").hide(),jQuery(".field_frm").parent().parent().find(".toggle-arrow").addClass("fa-caret-down").removeClass("fa-caret-up"),t?(jQuery(e).addClass("fa-caret-down").removeClass("fa-caret-up"),jQuery(e).parent(".li-settings").find(".field_frm").hide().removeClass("uwp-tab-settings-open")):(jQuery(e).addClass("fa-caret-up").removeClass("fa-caret-down"),jQuery(e).parent(".li-settings").find(".field_frm").show().addClass("uwp-tab-settings-open"))}function validate_field(e){var t=!0;switch(jQuery(e).attr("field_type")){case"radio":case"checkbox":jQuery(e).closest(".required_field").find(":checked").length>0&&(t=!1);break;case"select":jQuery(e).find("option:selected").length>0&&""!=jQuery(e).find("option:selected").val()&&(t=!1);break;case"multiselect":jQuery(e).find("option:selected").length>0&&(t=!1);break;case"email":""!=e.value&&/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e.value)&&(t=!1);break;case"url":""!=e.value&&/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e.value)&&(t=!1);break;case"editor":""!=jQuery("#"+jQuery(e).attr("field_id")).val()&&(t=!1);break;case"datepicker":case"time":case"text":case"textarea":default:""!=e.value&&(t=!1)}return t?(""==jQuery(e).closest(".required_field").find("span.uwp_message_error").html()&&jQuery(e).closest(".required_field").find("span.uwp_message_error").html(uwp_admin_ajax.custom_field_id_required),jQuery(e).closest(".required_field").find("span.uwp_message_error").fadeIn(),!1):(jQuery(e).closest(".required_field").find("span.uwp_message_error").html(""),jQuery(e).closest(".required_field").find("span.uwp_message_error").fadeOut(),!0)}function uwp_data_type_changed(e,t){e&&t&&(jQuery("#licontainer_"+t).find(".decimal-point-wrapper").hide(),"FLOAT"==jQuery(e).val()&&jQuery("#licontainer_"+t).find(".decimal-point-wrapper").show(),"FLOAT"==jQuery(e).val()||"INT"==jQuery(e).val()?(jQuery("#licontainer_"+t).find(".uwp-price-extra-set").show(),"1"==jQuery("#licontainer_"+t).find(".uwp-price-extra-set input[name='extra[is_price]']:checked").val()&&jQuery("#licontainer_"+t).find(".uwp-price-extra").show()):(jQuery("#licontainer_"+t).find(".uwp-price-extra-set").hide(),jQuery("#licontainer_"+t).find(".uwp-price-extra").hide()))}function save_field(e){if(jQuery("#licontainer_"+e+" #htmlvar_name").length>0){var t=jQuery("#licontainer_"+e+" #htmlvar_name").val();if(""==t)return alert(uwp_admin_ajax.custom_field_not_blank_var),!1;if(""!=t)for(var i=0;i<t.length;i++)if(-1!="!`@#$%^&*()+=-[]\\';,./{}|\":<>?~ ".indexOf(t.charAt(i)))return alert(uwp_admin_ajax.custom_field_not_special_char),!1;var a=jQuery("#licontainer_"+e+" #option_values");if(1==a.length){if(""==a.val())return alert(uwp_admin_ajax.custom_field_options_not_blank_var),!1}}var r="create_field=true&field_ins_upd=submit&"+jQuery("#licontainer_"+e).find("select, textarea, input").serialize();jQuery.ajax({url:uwp_admin_ajax.url+"?action=uwp_ajax_action&manage_field_type=custom_fields",type:"POST",data:r,success:function(t){if("invalid_key"==jQuery.trim(t))alert(uwp_admin_ajax.custom_field_unique_name);else{jQuery("#licontainer_"+e).replaceWith(jQuery.trim(t)),uwp_select2();var i=jQuery(".field_row_main ul.core").sortable("serialize")+"&update=update&manage_field_type=custom_fields";jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_action&create_field=true",i,function(e){}),uwp_init_tooltips(),jQuery(".field_frm").hide()}}})}function delete_field(e,t){1==confirm(uwp_admin_ajax.custom_field_delete)&&jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_action&create_field=true&manage_field_type=custom_fields",{field_id:e,field_ins_upd:"delete",_wpnonce:t},function(t){jQuery("#licontainer_"+e).remove()})}function delete_register_field(e,t,i,a){if("profile_tab"==a)r="uwp_ajax_profile_tabs_action";else var r="uwp_ajax_register_action";1==confirm(uwp_admin_ajax.custom_field_delete)&&(jQuery("#create_advance_search_li_"+i).show(),jQuery.get(uwp_admin_ajax.url+"?action="+r+"&create_field=true",{field_id:e,field_ins_upd:"delete",_wpnonce:t},function(t){jQuery("#licontainer_"+e).remove()}),jQuery("#uwp-"+i).closest("li").show())}function save_register_field(e,t){if("profile_tab"==t)i="uwp_ajax_profile_tabs_action";else var i="uwp_ajax_register_action";if(jQuery("#licontainer_"+e+" #field_title").length>0){if(""==jQuery("#licontainer_"+e+" #field_title").val())return alert(uwp_admin_ajax.custom_field_not_blank_var),!1}var a="create_field=true&field_ins_upd=submit&"+jQuery("#licontainer_"+e).find("select, textarea, input").serialize();jQuery.ajax({url:uwp_admin_ajax.url+"?action="+i,type:"POST",data:a,success:function(t){if("invalid_key"==jQuery.trim(t))alert(uwp_admin_ajax.custom_field_unique_name);else{jQuery("#licontainer_"+e).replaceWith(jQuery.trim(t));var a=jQuery(".field_row_main ul.uwp_form_extras").sortable("serialize")+"&update=update";jQuery.get(uwp_admin_ajax.url+"?action="+i+"&create_field=true",a,function(e){}),jQuery(".field_frm").hide()}}})}function uwp_init_advanced_settings(){jQuery(".uwp-advanced-toggle").off("click").click(function(){jQuery(".uwp-advanced-toggle").toggleClass("uwpa-hide"),console.log("toggle"),jQuery(".uwp-advanced-setting, #default_location_set_address_button").toggleClass("uwpa-show")})}function uwp_init_tooltips(){jQuery(".uwp-help-tip").tooltip().tooltip("destroy").tooltip({content:function(){return jQuery(this).prop("title")},tooltipClass:"uwp-ui-tooltip",position:{my:"center top",at:"center bottom+10",collision:"flipfit"},show:null,close:function(e,t){t.tooltip.hover(function(){jQuery(this).stop(!0).fadeTo(400,1)},function(){jQuery(this).fadeOut("400",function(){jQuery(this).remove()})})}})}jQuery(window).load(function(){jQuery("select.uwp_select2").length>0&&(jQuery("select.uwp_select2").select2(),jQuery("select.uwp_select2_nostd").select2({allow_single_deselect:"true"}));var e=jQuery(".uwp-color-picker");console.log("uwpColorPicker"),e.length&&e.wpColorPicker(),jQuery(".uwp_upload_btn").click(function(){var e=jQuery(this);frame=wp.media({title:"Select or Upload Media",button:{text:"Use Media"},multiple:!1}),frame.on("select",function(){var t=frame.state().get("selection").first().toJSON();e.parent().next().find("img").attr("src",t.url),e.parent().next().find("img").show(),e.parent().find(".uwp_remove_btn").show(),e.parent().find(".uwp_img_url").val(t.id)}),frame.open()}),jQuery(".uwp_remove_btn").click(function(){return 1==confirm("Are you sure?")&&(jQuery(this).parent().next().find("img").attr("src",""),jQuery(this).parent().find("input.uwp_img_url").val(""),jQuery(this).parent().next().find("img").hide(),jQuery(this).hide()),!1}),jQuery(".uwp-upload-img").each(function(){var e=jQuery(this),t=e.data("field");jQuery('[name="'+t+'[id]"]').length&&!jQuery('[name="'+t+'[id]"]').val()&&jQuery(".uwp_remove_image_button",e).hide()});var t=[];jQuery(document).on("click",".uwp_upload_image_button",function(e){e.preventDefault();var i=jQuery(this).closest(".uwp-upload-img"),a=i.data("field");a&&(t&&t[a]?t[a].open():(t[a]=wp.media.frames.downloadable_file=wp.media({title:uwp_admin_ajax.txt_choose_image,button:{text:uwp_admin_ajax.txt_use_image},multiple:!1}),t[a].on("select",function(){var e=t[a].state().get("selection").first().toJSON(),r=e.sizes.medium||e.sizes.full;a&&(jQuery('[name="'+a+'[id]"]').length&&jQuery('[name="'+a+'[id]"]').val(e.id),jQuery('[name="'+a+'[src]"]').length&&jQuery('[name="'+a+'[src]"]').val(e.url),jQuery('[name="'+a+'"]').length&&jQuery('[name="'+a+'"]').val(e.id)),i.closest(".form-field.form-invalid").removeClass("form-invalid"),jQuery(".uwp-upload-display",i).find("img").attr("src",r.url),jQuery(".uwp_remove_image_button").show()}),t[a].open()))}),jQuery(document).on("click",".uwp_remove_image_button",function(){var e=jQuery(this),t=e.closest(".uwp-upload-img"),i=t.data("field");return jQuery(".uwp-upload-display",t).find("img").attr("src",uwp_admin_ajax.img_spacer).removeAttr("width height sizes alt class srcset"),i&&(jQuery('[name="'+i+'[id]"]').length>0&&(jQuery('[name="'+i+'[id]"]').val(""),jQuery('[name="'+i+'[src]"]').val("")),jQuery('[name="'+i+'"]').length>0&&jQuery('[name="'+i+'"]').val("")),e.hide(),!1}),jQuery(".userswp .forminp .large-text").focus(function(){var e=jQuery(this).attr("placeholder");""==jQuery(this).val()&&jQuery(this).val(e)}).blur(function(){var e=jQuery(this).attr("placeholder");jQuery(this).val()==e&&jQuery(this).val("")}),uwp_init_tooltips()}),jQuery(document).ready(function(){jQuery("#uwp-form-builder-tab, #uwp-form-builder-tab-predefined").find("ul li a").click(function(){if(jQuery(this).attr("id")){var e=jQuery(this).data("field-type"),t=jQuery(this).data("field-type-key"),i=jQuery(this).data("field-custom-type"),a=jQuery(this).closest("#uwp-form-builder-tab, #uwp-form-builder-tab-predefined").find("#form_type").val(),r="new"+jQuery(".field_row_main ul.core li:last").index(),u=jQuery(this).closest("#uwp-available-fields").find(".manage_field_type").val();"custom_fields"==u&&jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_action&create_field=true",{field_type:e,field_type_key:t,form_type:a,field_id:r,field_ins_upd:"new",manage_field_type:u,custom_type:i},function(e){jQuery(".field_row_main ul.core").append(e),uwp_select2(),jQuery("#licontainer_"+r).find("#sort_order").val(parseInt(jQuery("#licontainer_"+r).index())+1),uwp_show_hide(jQuery("#licontainer_"+r).find(".toggle-arrow")),uwp_init_tooltips(),jQuery("html, body").animate({scrollTop:jQuery("#licontainer_"+r).offset().top},1e3)})}}),jQuery("#uwp-form-builder-tab, #uwp-form-builder-tab-predefined, #uwp-form-builder-tab-custom").find("ul li a").click(function(){if(jQuery(this).attr("id")){var e=jQuery(this).attr("id").replace("uwp-",""),t=jQuery(this).data("type"),i=jQuery(this).closest("#uwp-form-builder-tab, #uwp-form-builder-tab-predefined").find("#form_type").val(),a="new"+jQuery(".field_row_main ul.uwp_form_extras li:last").index(),r=jQuery(this).closest("#uwp-available-fields").find(".manage_field_type").val(),u=jQuery(this).data("data_type"),l={htmlvar_name:e,form_type:i,field_type:t,field_data_type:u,field_id:a,field_ins_upd:"new"};if("register"==r)n="uwp_ajax_register_action";else if("search"==r)n="uwp_ajax_search_action";else if("profile_tabs"==r){var n="uwp_ajax_profile_tabs_action";l={htmlvar_name:e,form_type:i,field_type:t,field_ins_upd:"new",tab_layout:jQuery(this).data("tab_layout"),tab_login_only:jQuery(this).data("tab_login_only"),tab_name:jQuery(this).data("tab_name"),tab_type:jQuery(this).data("tab_type"),tab_icon:jQuery(this).data("tab_icon"),tab_key:jQuery(this).data("tab_key"),tab_content:jQuery(this).data("tab_content")}}jQuery.get(uwp_admin_ajax.url+"?action="+n+"&create_field=true",l,function(t){console.log(a),jQuery(".field_row_main ul.uwp_form_extras").append(t),jQuery("#licontainer_"+e).find("#sort_order").val(parseInt(jQuery("#licontainer_"+e).index())+1),uwp_show_hide(jQuery("#licontainer_"+e).find(".toggle-arrow")),uwp_init_tooltips(),jQuery("html, body").animate({scrollTop:jQuery("#licontainer_"+e).offset().top},1e3),"register"==r&&save_register_field(e)})}}),jQuery(".field_row_main ul.core").sortable({opacity:.8,cursor:"move",placeholder:"ui-state-highlight",cancel:"input,label,select",update:function(){var e=jQuery(this).closest("#uwp-selected-fields").find(".manage_field_type").val(),t=jQuery(this).sortable("serialize")+"&update=update&manage_field_type="+e;if("register"==e)i="uwp_ajax_register_action";else if("search"==e)i="uwp_ajax_search_action";else if("profile_tabs"==e)i="uwp_ajax_profile_tabs_action";else var i="uwp_ajax_action";jQuery.get(uwp_admin_ajax.url+"?action="+i+"&create_field=true",t,function(e){console.log("Fields have been ordered.")})}})});